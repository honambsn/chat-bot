import openai

openai.api_key = "YOUR_API_KEY"

# Fine-tune Model
training_response = openai.Training.create(
    display_name="GPT-3.5 Chatbot",
    model="text-davinci-003",
    files={
        "fine-tune.md": {
            "content": "Question: What's the capital of France?\nAnswer: Paris\n\nQuestion: Who is the President of the USA?\nAnswer: Joe Biden"
            
        }
    },
    n_backups=2
)

# Get fine-tuned model ID
fine_tuned_model_id = training_response['model_id']

# Define a chat function
def chat(prompt, fine_tuned_model_id, temperature=0.7, max_tokens=50, n=1, stop=["\n"]):
    response = openai.Completion.create(
        model=fine_tuned_model_id,
        prompt=prompt,
        temperature=temperature,
        max_tokens=max_tokens,
        n=n,
        stop=stop,
    )
    return response.choices[0].text.strip()

# Example usage
print(chat("Question: What's the capital of Canada?\nAnswer:", fine_tuned_model_id))
